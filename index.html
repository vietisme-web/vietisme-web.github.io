<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R·∫Øn SƒÉn M·ªìi Simple</title>
<style>
  body {display:flex; flex-direction:column; align-items:center; font-family:Arial; background:#f4f4f4;}
  h1 {margin-top:20px; color:#222;}
  canvas {background:#000; margin-top:20px;}
  button {padding:10px 20px; margin:10px; font-size:16px; cursor:pointer;}
</style>
</head>
<body>

<h1>R·∫Øn SƒÉn M·ªìi üêç</h1>
<canvas id="gameCanvas" width="400" height="400"></canvas>
<button onclick="startGame()">B·∫Øt ƒë·∫ßu l·∫°i</button>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const box = 20; // k√≠ch th∆∞·ªõc 1 √¥
let snake = [{x: 10*box, y: 10*box}];
let direction = null;
let food = {};
let score = 0;
let gameInterval;

function randomFood(){
  food = {
    x: Math.floor(Math.random() * (canvas.width/box)) * box,
    y: Math.floor(Math.random() * (canvas.height/box)) * box
  };
}

function draw(){
  ctx.fillStyle = '#000';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // v·∫Ω r·∫Øn
  for(let i=0;i<snake.length;i++){
    ctx.fillStyle = i===0 ? 'lime':'green';
    ctx.fillRect(snake[i].x,snake[i].y,box,box);
  }

  // v·∫Ω th·ª©c ƒÉn
  ctx.fillStyle = 'red';
  ctx.fillRect(food.x,food.y,box,box);

  // di chuy·ªÉn r·∫Øn
  let headX = snake[0].x;
  let headY = snake[0].y;

  if(direction==='LEFT') headX -= box;
  if(direction==='RIGHT') headX += box;
  if(direction==='UP') headY -= box;
  if(direction==='DOWN') headY += box;

  // ki·ªÉm tra ƒÉn th·ª©c ƒÉn
  if(headX === food.x && headY === food.y){
    score++;
    randomFood();
  } else {
    snake.pop();
  }

  const newHead = {x: headX, y: headY};

  // ki·ªÉm tra va ch·∫°m t∆∞·ªùng ho·∫∑c ch√≠nh m√¨nh
  if(headX<0 || headX>=canvas.width || headY<0 || headY>=canvas.height || snake.some(s=>s.x===headX && s.y===headY)){
    clearInterval(gameInterval);
    alert('Game Over! ƒêi·ªÉm c·ªßa b·∫°n: '+score);
    return;
  }

  snake.unshift(newHead);
}

document.addEventListener('keydown', e=>{
  if(e.key==='ArrowLeft' && direction!=='RIGHT') direction='LEFT';
  if(e.key==='ArrowRight' && direction!=='LEFT') direction='RIGHT';
  if(e.key==='ArrowUp' && direction!=='DOWN') direction='UP';
  if(e.key==='ArrowDown' && direction!=='UP') direction='DOWN';
});

function startGame(){
  snake = [{x: 10*box, y: 10*box}];
  direction = null;
  score = 0;
  randomFood();
  clearInterval(gameInterval);
  gameInterval = setInterval(draw, 100);
}

startGame();
</script>

</body>
</html>
