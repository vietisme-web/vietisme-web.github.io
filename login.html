<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Chess Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Login / Register</h1>
  <div>
    <input type="text" id="username" placeholder="username">
    <input type="password" id="password" placeholder="password">
    <button id="loginBtn">Login</button>
    <button id="registerBtn">Register</button>
  </div>
  <script>
    async function login() {
      let username = document.getElementById('username').value;
      let password = document.getElementById('password').value;
      let res = await fetch('/auth/login', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({username,password})
      });
      let data = await res.json();
      if(data.success) location.href = 'index.html';
      else alert(data.error);
    }

    async function register() {
      let username = document.getElementById('username').value;
      let password = document.getElementById('password').value;
      let res = await fetch('/auth/register', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({username,password})
      });
      let data = await res.json();
      if(data.success) location.href = 'index.html';
      else alert(data.error);
    }

    document.getElementById('loginBtn').addEventListener('click', login);
    document.getElementById('registerBtn').addEventListener('click', register);
  </script>
</body>
</html>
